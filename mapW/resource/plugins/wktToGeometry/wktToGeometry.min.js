'use strict';var WKTUtil=function(a){this.initialize(a)};WKTUtil.prototype={initialize:function(a){this.regExes={typeStr:/^\s*(\w+)\s*\s\u2217(.\u2217)\s\u2217\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*?(.\u2217?)?\s*$/};for(var b in a)this[b]=a[b]},read:function(a){var b,c,e=[];a=a.replace(/[\n\r]/g," ");var d=a.split("(");if(d){a=d[0].toLowerCase().replace(" ","");if("polygon"===a)if(3===d.length)c=d[2].replace("))",""),e.push(c);else{for(var f=2;f<d.length-1;f++)c=d[f].replace("),",""),e.push(c);e.push(d[d.length-1].replace("))",""))}else switch(a){case "multilinestring":for(f=2;f<d.length-1;f++)c=d[f].replace("),",""),e.push(c);e.push(d[d.length-1].replace("))",""));break;default:c=d[1].replace(")",""),e.push(c)}this.parse[a]&&(b=this.parse[a].apply(this,[e.join("@")]))}return b},extractGeometry:function(a){var b=a.CLASS_NAME.split(".")[2].toLowerCase();if(!this.extract[b])return null;this.internalProjection&&this.externalProjection&&(a=a.clone(),a.transform(this.internalProjection,this.externalProjection));return("collection"==b?"GEOMETRYCOLLECTION":b.toUpperCase())+"("+this.extract[b].apply(this,[a])+")"},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},parse:{point:function(a){return this.trim(a).split(this.regExes.spaces)},multipoint:function(a){for(var b=this.trim(a).split(","),c=[],e=0,d=b.length;e<d;++e)a=b[e].replace(this.regExes.trimParens,"$1"),c.push(this.parse.point.apply(this,[a]).geometry);return c},linestring:function(a){a=this.trim(a).split(",");for(var b=[],c=0,e=a.length;c<e;++c)b.push(this.parse.point.apply(this,[a[c]]));return b},multilinestring:function(a){a=this.trim(a).split("@");for(var b=[],c=0,e=a.length;c<e;++c)b.push(this.parse.linestring.apply(this,[a[c]]));return b},polygon:function(a){var b;a=a.split("@");var c=[],e;for(e in a)for(var d=this.trim(a[e]).split(this.regExes.parenComma),f=0,g=d.length;f<g;++f)b=d[f].replace(this.regExes.trimParens,"$1"),b=this.parse.linestring.apply(this,[b]),c.push(b);return c}}};var wktToGeometry=function(){var a=function(a){require(["esri/geometry/Point","dojo/domReady!"],function(b){var c=(new WKTUtil).read(a.wkt);b=new b({x:c[0],y:c[1],spatialReference:a.spatialReference});a.callback(b)})},b=function(a){require(["esri/geometry/Polyline","dojo/domReady!"],function(b){var c={paths:[(new WKTUtil).read(a.wkt)],spatialReference:a.spatialReference};b=new b(c);a.callback(b)})},c=function(a){require(["esri/geometry/Polyline","dojo/domReady!"],function(b){var c=(new WKTUtil).read(a.wkt),e=new b(a.spatialReference);$(c).each(function(a,b){e.addPath(b)});a.callback(e)})},e=function(a){require(["esri/geometry/Point","esri/geometry/Polygon","dojo/domReady!"],function(b,c){b={rings:(new WKTUtil).read(a.wkt),spatialReference:a.spatialReference};c=new c(b);a.callback(c)})};return{startParse:function(d){switch(d.wkt.split("(")[0].toLowerCase().replace(" ","")){case "point":case "multipoint":a(d);break;case "linestring":b(d);break;case "multilinestring":c(d);break;case "polygon":e(d)}}}}();